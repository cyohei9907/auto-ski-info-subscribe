# ğŸ—ï¸ ç½‘é¡µæŒ‰é’®è‡ªåŠ¨ç™»å½•æ¶æ„

## ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·æµè§ˆå™¨ (localhost:3000)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Settings Page (SettingsPage.js)                       â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚         â”‚
â”‚  â”‚  â”‚  ğŸ“ è¡¨å•                                    â”‚       â”‚         â”‚
â”‚  â”‚  â”‚  â€¢ X.com ç”¨æˆ·åè¾“å…¥æ¡†                       â”‚       â”‚         â”‚
â”‚  â”‚  â”‚  â€¢ å¯†ç è¾“å…¥æ¡†                               â”‚       â”‚         â”‚
â”‚  â”‚  â”‚  â€¢ åå°æ¨¡å¼å¼€å…³                             â”‚       â”‚         â”‚
â”‚  â”‚  â”‚  â€¢ [â–¶ï¸ å¼€å§‹è‡ªåŠ¨ç™»å½•] æŒ‰é’®                   â”‚       â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚         â”‚
â”‚  â”‚                     â†“                                  â”‚         â”‚
â”‚  â”‚  const handleSetupAuth = async (values) => {          â”‚         â”‚
â”‚  â”‚    await setupXAuthentication({                        â”‚         â”‚
â”‚  â”‚      username, password, headless                      â”‚         â”‚
â”‚  â”‚    });                                                  â”‚         â”‚
â”‚  â”‚  }                                                      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                               â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  API Service (api.js)                                  â”‚         â”‚
â”‚  â”‚  export const setupXAuthentication = async () => {     â”‚         â”‚
â”‚  â”‚    const response = await api.post(                    â”‚         â”‚
â”‚  â”‚      "/monitor/setup-auth/",                           â”‚         â”‚
â”‚  â”‚      { username, password, headless }                  â”‚         â”‚
â”‚  â”‚    );                                                   â”‚         â”‚
â”‚  â”‚    return response.data;                               â”‚         â”‚
â”‚  â”‚  }                                                      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚ HTTP POST
                                â”‚ /api/monitor/setup-auth/
                                â”‚ {username, password, headless}
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Django Backend (localhost:8000)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  URL Router (x_monitor/urls.py)                        â”‚         â”‚
â”‚  â”‚  path('setup-auth/', views.setup_x_authentication)    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                               â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  View (x_monitor/views.py)                             â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  @api_view(['POST'])                                   â”‚         â”‚
â”‚  â”‚  def setup_x_authentication(request):                  â”‚         â”‚
â”‚  â”‚    username = request.data.get('username')             â”‚         â”‚
â”‚  â”‚    password = request.data.get('password')             â”‚         â”‚
â”‚  â”‚    headless = request.data.get('headless', True)       â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚    # è°ƒç”¨è‡ªåŠ¨ç™»å½•å‡½æ•°                                   â”‚         â”‚
â”‚  â”‚    from .authenticated_scraper import setup_auth       â”‚         â”‚
â”‚  â”‚    success = setup_authentication(                     â”‚         â”‚
â”‚  â”‚      username, password, headless                      â”‚         â”‚
â”‚  â”‚    )                                                    â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚    return Response({                                   â”‚         â”‚
â”‚  â”‚      'success': True,                                  â”‚         â”‚
â”‚  â”‚      'message': 'X.comç™»å½•æˆåŠŸï¼',                     â”‚         â”‚
â”‚  â”‚      'cookies_count': len(cookies)                     â”‚         â”‚
â”‚  â”‚    })                                                   â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                               â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Auto Login (x_monitor/authenticated_scraper.py)       â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  def setup_authentication(username, password, headless):â”‚         â”‚
â”‚  â”‚    with sync_playwright() as p:                        â”‚         â”‚
â”‚  â”‚      # 1. å¯åŠ¨æµè§ˆå™¨                                    â”‚         â”‚
â”‚  â”‚      browser = p.chromium.launch(headless=headless)    â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚      # 2. è®¿é—®ç™»å½•é¡µ                                    â”‚         â”‚
â”‚  â”‚      page.goto("https://x.com/i/flow/login")           â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚      # 3. å¡«å†™ç”¨æˆ·å                                    â”‚         â”‚
â”‚  â”‚      username_input.fill(username)                     â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚      # 4. ç‚¹å‡»NextæŒ‰é’®                                  â”‚         â”‚
â”‚  â”‚      next_button.click()                               â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚      # 5. å¡«å†™å¯†ç                                       â”‚         â”‚
â”‚  â”‚      password_input.fill(password)                     â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚      # 6. ç‚¹å‡»Log inæŒ‰é’®                                â”‚         â”‚
â”‚  â”‚      login_button.click()                              â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚      # 7. ä¿å­˜cookies                                  â”‚         â”‚
â”‚  â”‚      cookies = context.cookies()                       â”‚         â”‚
â”‚  â”‚      json.dump(cookies, open('x_cookies.json', 'w'))   â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚    return True                                          â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                               â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Playwright (åœ¨Dockerå®¹å™¨å†…è¿è¡Œ)                         â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚         â”‚
â”‚  â”‚  â”‚  Chrome Browser (headless/headed)        â”‚         â”‚         â”‚
â”‚  â”‚  â”‚                                           â”‚         â”‚         â”‚
â”‚  â”‚  â”‚  ğŸŒ è®¿é—® https://x.com/i/flow/login      â”‚         â”‚         â”‚
â”‚  â”‚  â”‚  ğŸ“ è‡ªåŠ¨å¡«å†™è¡¨å•                          â”‚         â”‚         â”‚
â”‚  â”‚  â”‚  ğŸ–±ï¸ è‡ªåŠ¨ç‚¹å‡»æŒ‰é’®                          â”‚         â”‚         â”‚
â”‚  â”‚  â”‚  â° ç­‰å¾…é¡µé¢åŠ è½½                          â”‚         â”‚         â”‚
â”‚  â”‚  â”‚  ğŸª è·å–cookies                           â”‚         â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                               â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  Cookies Storage                                        â”‚         â”‚
â”‚  â”‚  ğŸ“ backend/data/x_cookies.json                        â”‚         â”‚
â”‚  â”‚  [                                                      â”‚         â”‚
â”‚  â”‚    {                                                    â”‚         â”‚
â”‚  â”‚      "name": "auth_token",                             â”‚         â”‚
â”‚  â”‚      "value": "xxxxx...",                              â”‚         â”‚
â”‚  â”‚      "domain": ".x.com",                               â”‚         â”‚
â”‚  â”‚      "path": "/",                                       â”‚         â”‚
â”‚  â”‚      ...                                                â”‚         â”‚
â”‚  â”‚    },                                                   â”‚         â”‚
â”‚  â”‚    ...23 cookies total                                 â”‚         â”‚
â”‚  â”‚  ]                                                      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     åç»­ä½¿ç”¨ Authenticated Scraper                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                       â”‚
â”‚  ç”¨æˆ·ç‚¹å‡»"å–å¾—æœ€æ–°10æ¡" â†’ Backend loads x_cookies.json               â”‚
â”‚  â†’ Playwrightä½¿ç”¨cookiesè®¿é—®X.com â†’ è·å–å®Œæ•´æ—¶é—´çº¿ â†’ ä¿å­˜åˆ°æ•°æ®åº“      â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®æµè¯¦è§£

### 1. å‰ç«¯ â†’ åç«¯ (è¯·æ±‚)

```javascript
// ç”¨æˆ·è¾“å…¥
{
  username: "your_email@example.com",
  password: "your_password",
  headless: true
}
        â†“
// HTTP POST
POST /api/monitor/setup-auth/
Content-Type: application/json
Authorization: Token xxxxx

{
  "username": "your_email@example.com",
  "password": "your_password",
  "headless": true
}
```

### 2. åç«¯å¤„ç†æµç¨‹

```python
# Step 1: æ¥æ”¶è¯·æ±‚
request.data â†’ {username, password, headless}

# Step 2: è°ƒç”¨è‡ªåŠ¨ç™»å½•
setup_authentication(username, password, headless)

# Step 3: Playwrightæ“ä½œ
browser.launch() â†’ page.goto() â†’ fill() â†’ click() â†’ wait()

# Step 4: è·å–cookies
context.cookies() â†’ [{name, value, domain, ...}, ...]

# Step 5: ä¿å­˜åˆ°æ–‡ä»¶
json.dump(cookies, file) â†’ backend/data/x_cookies.json

# Step 6: è¿”å›å“åº”
return {success: True, cookies_count: 23}
```

### 3. åç«¯ â†’ å‰ç«¯ (å“åº”)

```javascript
// æˆåŠŸå“åº”
{
  "success": true,
  "message": "X.comç™»å½•æˆåŠŸï¼å·²ä¿å­˜ 23 ä¸ªcookies",
  "cookies_count": 23,
  "next_steps": [
    "å·²è‡ªåŠ¨å¯ç”¨è®¤è¯çˆ¬è™«",
    "ç°åœ¨å¯ä»¥è·å–æœ€æ–°æ¨æ–‡",
    "å»ºè®®é‡å¯æœåŠ¡ä»¥åº”ç”¨æ›´æ”¹"
  ]
}
        â†“
// å‰ç«¯æ˜¾ç¤º
- Loading spinner æ¶ˆå¤±
- æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
- æ˜¾ç¤ºä¸‹ä¸€æ­¥æŒ‡å¼•
- è¡¨å•é‡ç½®
```

## å…³é”®æŠ€æœ¯ç‚¹

### 1. å‰ç«¯è¡¨å• (React + Ant Design)

```javascript
<Form onFinish={handleSetupAuth}>
  <Input name="username" /> // ç”¨æˆ·å
  <Input.Password name="password" /> // å¯†ç 
  <Switch name="headless" /> // åå°æ¨¡å¼
  <Button loading={loading}> // æäº¤æŒ‰é’® å¼€å§‹è‡ªåŠ¨ç™»å½•</Button>
</Form>
```

### 2. API è°ƒç”¨ (Axios)

```javascript
const response = await api.post("/monitor/setup-auth/", {
  username: values.username,
  password: values.password,
  headless: values.headless,
});

if (response.data.success) {
  message.success("ç™»å½•æˆåŠŸï¼");
}
```

### 3. Django View (REST Framework)

```python
@api_view(['POST'])
@permission_classes([permissions.IsAuthenticated])
def setup_x_authentication(request):
    # éªŒè¯ç”¨æˆ·å·²ç™»å½•
    # è·å–è¯·æ±‚å‚æ•°
    # è°ƒç”¨è‡ªåŠ¨ç™»å½•
    # è¿”å›ç»“æœ
```

### 4. Playwright è‡ªåŠ¨åŒ– (åŒæ­¥ API)

```python
with sync_playwright() as p:
    browser = p.chromium.launch(headless=True)
    context = browser.new_context()
    page = context.new_page()

    # è‡ªåŠ¨åŒ–æ“ä½œ
    page.goto("https://x.com/i/flow/login")
    page.fill('input[name="username"]', username)
    page.click('button:has-text("Next")')
    page.fill('input[name="password"]', password)
    page.click('button:has-text("Log in")')

    # ä¿å­˜cookies
    cookies = context.cookies()
```

## å®‰å…¨æ¶æ„

### 1. å¯†ç å¤„ç†

```
ç”¨æˆ·è¾“å…¥å¯†ç  (å‰ç«¯)
      â†“
HTTPSåŠ å¯†ä¼ è¾“
      â†“
Djangoæ¥æ”¶ (ä»…åœ¨å†…å­˜ä¸­)
      â†“
ä¼ ç»™Playwright (ä»…åœ¨å†…å­˜ä¸­)
      â†“
ç”¨äºç™»å½•X.com
      â†“
âŒ ä¸ä¿å­˜åˆ°ä»»ä½•åœ°æ–¹
âœ… è¿›ç¨‹ç»“æŸåè‡ªåŠ¨æ¸…é™¤
```

### 2. Cookies ä¿å­˜

```
Playwrightè·å–cookies
      â†“
ä¿å­˜åˆ° backend/data/x_cookies.json
      â†“
æ–‡ä»¶æƒé™ï¼šä»…æœåŠ¡å™¨å¯è¯»
      â†“
.gitignoreï¼šä¸æäº¤åˆ°Git
      â†“
æœ‰æ•ˆæœŸï¼š30-90å¤©
```

### 3. è®¤è¯æµç¨‹

```
å‰ç«¯è¯·æ±‚ â†’ Django TokenéªŒè¯ â†’ éªŒè¯é€šè¿‡ â†’ æ‰§è¡Œç™»å½• â†’ è¿”å›ç»“æœ
           â†“ éªŒè¯å¤±è´¥
         è¿”å›401é”™è¯¯
```

## æ€§èƒ½ä¼˜åŒ–

### 1. å¼‚æ­¥å¤„ç†

```
å‰ç«¯æ˜¾ç¤ºLoadingçŠ¶æ€
     â†“
åç«¯åŒæ­¥æ‰§è¡Œï¼ˆ15-30ç§’ï¼‰
     â†“
å®Œæˆåè¿”å›å“åº”
     â†“
å‰ç«¯æ›´æ–°UI
```

### 2. é”™è¯¯å¤„ç†

```
try {
  await setupXAuthentication()
} catch (error) {
  // ç½‘ç»œé”™è¯¯
  // ç™»å½•å¤±è´¥
  // è¶…æ—¶
  æ˜¾ç¤ºå‹å¥½é”™è¯¯æ¶ˆæ¯
}
```

## éƒ¨ç½²è€ƒè™‘

### Docker ç¯å¢ƒ

```yaml
backend:
  volumes:
    - ./backend/data:/app/data # æŒä¹…åŒ–cookies
  environment:
    - USE_AUTHENTICATED_SCRAPER=True
```

### Playwright ä¾èµ–

```dockerfile
# åœ¨Dockeré•œåƒä¸­å®‰è£…
RUN pip install playwright
RUN playwright install chromium
RUN playwright install-deps
```

## æ‰©å±•æ€§

### æœªæ¥å¯æ·»åŠ çš„åŠŸèƒ½

1. **è¿›åº¦æ¡æ˜¾ç¤º**

   ```
   æ­£åœ¨è®¿é—®ç™»å½•é¡µ... [===     ] 30%
   æ­£åœ¨å¡«å†™ç”¨æˆ·å... [======  ] 60%
   æ­£åœ¨ç­‰å¾…ç™»å½•... [=========] 90%
   ```

2. **Cookies ç®¡ç†ç•Œé¢**

   ```
   - æŸ¥çœ‹cookiesçŠ¶æ€
   - æ˜¾ç¤ºæœ‰æ•ˆæœŸ
   - æ‰‹åŠ¨åˆ·æ–°
   - åˆ é™¤cookies
   ```

3. **æ‰¹é‡è´¦å·ç®¡ç†**

   ```
   - æ”¯æŒå¤šä¸ªX.comè´¦å·
   - ä¸ºæ¯ä¸ªè´¦å·ä¿å­˜ç‹¬ç«‹cookies
   - è‡ªåŠ¨è½®æ¢ä½¿ç”¨
   ```

4. **è‡ªåŠ¨ç»­æœŸ**
   ```
   - å®šæ—¶æ£€æŸ¥cookiesæœ‰æ•ˆæœŸ
   - å¿«è¿‡æœŸæ—¶è‡ªåŠ¨ç»­æœŸ
   - å‘é€é€šçŸ¥æé†’
   ```

## æ€»ç»“

è¿™ä¸ªæ¶æ„å®ç°äº†ï¼š

- âœ… **ç”¨æˆ·å‹å¥½**ï¼šç½‘é¡µç‚¹å‡»ï¼Œæ— éœ€å‘½ä»¤è¡Œ
- âœ… **è‡ªåŠ¨åŒ–**ï¼šæœåŠ¡å™¨ç«¯æµè§ˆå™¨æ“ä½œ
- âœ… **å®‰å…¨**ï¼šå¯†ç ä¸ä¿å­˜ï¼ŒHTTPS ä¼ è¾“
- âœ… **å¯é **ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… **å¯æ‰©å±•**ï¼šæ˜“äºæ·»åŠ æ–°åŠŸèƒ½

**æ ¸å¿ƒä»·å€¼**ï¼šå°†å¤æ‚çš„å‘½ä»¤è¡Œæ“ä½œè½¬åŒ–ä¸ºç®€å•çš„ç½‘é¡µæŒ‰é’®ç‚¹å‡»ï¼
